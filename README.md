# Ditel Easy WiFi
## 概要
## 環境
|項目|内容|
|---|---|
|エディタ|`Visual Studio Code` <br> version:`1.88.1`<br> 拡張機能:`PlatformIO`|
|使用ボード|`Wio Terminal`<br>`ESP32-DevKitC ESP-WROOM-32`|
## 関数説明
- `allocateMemoryForScan()`   
  スキャンしたネットワークの情報を, 格納する配列用の動的メモリを確保します.    
  
  - 注意事項
    
  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`uint16_t`|確保する配列の個数|`NUMBER_OF_SCAN_NETWORK`|
  
  - 返り値   
    型 : `Ditel_Easy_WiFi::Network *`   
    確保した動的メモリのポインタ

---

- `scanNetwork()`   
  スキャンしたネットワークの情報を, 渡された配列に格納します.    

  - 注意事項
    - 取得できるネットワークの情報は`SSID`, `RSSI`, 暗号化のタイプ
    - `SSID`に英数字以外の文字が含まれている場合は, 正しく取得できない可能性がある

  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`Ditel_Easy_WiFi::Network *`|ネットワーク情報を格納する配列|-|
    |第2引数|`uint16_t`|検出するネットワーク数の最大値|`NUMBER_OF_SCAN_NETWORK`|
  
  - 返り値   
    型 : `int32_t`   
    |値|内容|
    |---|---|
    |`ERROR_SET_WIFI_MODE`|WiFiモードをSTAモードにできない|
    |`ERROR_WIFI_DISCONNECTED`|ネットワーク接続を切断できない|
    |0以上|検出したネットワーク数|

---

- `scanNetworkToSerial()`   
  スキャンしたネットワークの情報を, シリアルモニタに表示します.    

  - 注意事項
    - 取得できるネットワークの情報は`SSID`, `RSSI`, ネットワークがオープンであるか
    - `SSID`に英数字以外の文字が含まれている場合は, 正しく取得できない可能性がある

  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`bool`|シリアル通信がすでに開始しているか|`false`|
    |第2引数|`uint32_t`|シリアル通信のスピード(第1引数が`true`の場合)|`SERIAL_SPEED`|
  
  - 返り値   
    

---

- `connectToNetwork()`   
  指定されたネットワークに接続します.    

  - 注意事項
    - `SSID`に英数字以外の文字が含まれている場合は, 正しく接続できない可能性がある
    - この関数を実行する前に`Password`を設定する必要がある

  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`Ditel_Easy_WiFi::Network`|接続するネットワークの情報|-|
    |第2引数|`uint16_t`|接続試行のタイムアウトの長さ[ms]|-|
  
  - 返り値   
    型 : `int`   
    |値|内容|
    |---|---|
    |`ERROR_SET_WIFI_MODE`|WiFiモードをSTAモードにできない|
    |`ERROR_BEGIN_WIFI`|WiFiを開始できない|
    |`ERROR_WIFI_CONNECT`|ネットワークに接続できない|
    |`DWIFI_OK`|正常にネットワークに接続できた|

---

- `getMyIpAddress()`   
  現在接続しているネットワークにおける, 自分のIPアドレスを取得する.    

  - 注意事項
    - この関数を実行する前に`connectToNetwork()`を実行し, 正常にネットワークに接続する必要がある.

  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`char *`|IPアドレスを格納するための配列のポインタ|-|
  
  - 返り値   

---

- `UDP.begin()`   
  UDP通信を開始します.    

  - 注意事項
    - この関数を実行する前に`connectToNetwork()`を実行し, 正常にネットワークに接続する必要がある.

  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`uint16_t`|開放する自分のUDPポート|-|
  
  - 返り値   
    型 : `int`   
    |値|内容|
    |---|---|
    |`ERROR_UDP_BEGIN`|UDP通信を開始できなかった|
    |`DWIFI_OK`|正常にUDP通信を開始できた|

---

- `UDP.setServerInfo()`   
  UDP通信を開始します.    

  - 注意事項
    - この関数を実行する前に`UDP.begin()`を実行し, 正常にUDP通信を開始する必要がある.

  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`String`|サーバーのIPアドレス|-|
  
  - 返り値   

---

- `UDP.send()`   
  UDP通信でデータを送信します.    

  - 注意事項
    - この関数を実行する前に`setServerInfo()`を実行し, サーバーの情報を設定する必要がある.

  - 引数   
    |引数|型|内容|初期値|
    |---|---|---|---|
    |第1引数|`uint8_t *`|送信するデータの配列|-|
    |第2引数|`size_t`|送信するデータのサイズ|-|

    <!-- TODO ここから -->
  
  - 返り値   
    型 : `int`   
    |値|内容|
    |---|---|
    |`ERROR_UDP_BEGIN`|UDP通信を開始できなかった|
    |`DWIFI_OK`|正常にUDP通信を開始できた|  

---